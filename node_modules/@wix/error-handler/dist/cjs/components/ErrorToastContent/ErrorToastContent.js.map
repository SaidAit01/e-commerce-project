{"version":3,"names":["_designSystem","require","_wixUiIconsCommon","_react","_interopRequireWildcard","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","PopoverContent","memo","props","requestId","errorHandler","translations","translate","createElement","Box","direction","gap","__self","__source","fileName","lineNumber","columnNumber","Text","dataHook","size","skin","weight","marginTop","CopyClipboard","value","isCopied","copyToClipboard","TextButton","prefixIcon","DuplicateSmall","onClick","RequestInfo","shown","setShown","light","secondary","Popover","showArrow","animate","placement","onMouseEnter","onMouseLeave","appendTo","Element","as","InfoCircleSmall","fill","Content","width","position","padding","top","right","CloseButton","ErrorToastContent","message","useState","ready","setReady","_ready","useEffect","getInitPromise","then"],"sources":["../../../../src/components/ErrorToastContent/ErrorToastContent.tsx"],"sourcesContent":["import {\n  Box,\n  CloseButton,\n  CopyClipboard,\n  Popover,\n  Text,\n  TextButton,\n} from '@wix/design-system';\nimport { DuplicateSmall, InfoCircleSmall } from '@wix/wix-ui-icons-common';\nimport React, { memo, useEffect, useState } from 'react';\nimport { ErrorHandler } from '../../error-handler/ErrorHandler';\n\nexport interface ErrorToastContentProps {\n  dataHook?: string;\n  errorHandler: ErrorHandler;\n  message?: string;\n  requestId?: string | null;\n}\n\nconst PopoverContent = memo(function PopoverContent(props: {\n  errorHandler: ErrorHandler;\n  requestId: string;\n}) {\n  const { requestId, errorHandler } = props;\n\n  const {\n    translations: { translate: t },\n  } = errorHandler;\n\n  return (\n    <Box direction=\"vertical\" gap=\"SP2\">\n      <div>\n        <Text\n          dataHook=\"info-description\"\n          size=\"small\"\n          skin=\"standard\"\n          weight=\"thin\"\n        >\n          {t('errorHandler.requestID.tooltip.description')}\n        </Text>\n      </div>\n      <Box marginTop={2}>\n        <CopyClipboard value={requestId}>\n          {({ isCopied, copyToClipboard }) => (\n            <TextButton\n              prefixIcon={<DuplicateSmall />}\n              size=\"small\"\n              onClick={() => {\n                copyToClipboard();\n              }}\n            >\n              {isCopied\n                ? t('errorHandler.requestID.tooltip.cta.copied-success')\n                : t('errorHandler.requestID.tooltip.cta')}\n            </TextButton>\n          )}\n        </CopyClipboard>\n      </Box>\n    </Box>\n  );\n});\n\nconst RequestInfo = memo(function RequestInfo(props: {\n  errorHandler: ErrorHandler;\n  requestId: string;\n  shown: boolean;\n  setShown: (shown: boolean) => void;\n}) {\n  const { errorHandler, requestId, shown, setShown } = props;\n\n  return (\n    <Box gap={1} dataHook=\"request-info\">\n      <Text\n        dataHook=\"info-request-id\"\n        size=\"small\"\n        weight=\"thin\"\n        light\n        secondary\n      >\n        {`Request ID: ${requestId}`}\n      </Text>\n      <Popover\n        showArrow\n        animate\n        placement=\"auto\"\n        shown={shown}\n        onMouseEnter={() => setShown(true)}\n        onMouseLeave={() => setShown(false)}\n        appendTo=\"parent\"\n        dataHook=\"info-popover\"\n      >\n        <Popover.Element>\n          <TextButton onClick={() => setShown(true)} as=\"button\">\n            <InfoCircleSmall fill=\"var(--wsr-color-D40, #868aa5)\" />\n          </TextButton>\n        </Popover.Element>\n        <Popover.Content>\n          <Box width=\"350px\" position=\"relative\" padding=\"SP5\">\n            <Box position=\"absolute\" top=\"6px\" right=\"12px\">\n              <CloseButton\n                size=\"medium\"\n                onClick={() => setShown(false)}\n                skin=\"dark\"\n              />\n            </Box>\n\n            <PopoverContent errorHandler={errorHandler} requestId={requestId} />\n          </Box>\n        </Popover.Content>\n      </Popover>\n    </Box>\n  );\n});\n\nexport function ErrorToastContent(props: ErrorToastContentProps) {\n  const { dataHook, message, requestId, errorHandler } = props;\n\n  const { translations } = errorHandler;\n\n  const [shown, setShown] = useState(false);\n\n  const [ready, setReady] = useState(translations._ready);\n\n  useEffect(() => {\n    if (ready) {\n      return;\n    }\n    translations.getInitPromise().then(() => {\n      setReady(true);\n    });\n  }, []);\n\n  return (\n    <Box dataHook={dataHook} direction=\"vertical\">\n      {message}\n\n      {requestId && ready && (\n        <RequestInfo\n          errorHandler={errorHandler}\n          requestId={requestId}\n          shown={shown}\n          setShown={setShown}\n        />\n      )}\n    </Box>\n  );\n}\n"],"mappings":"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","ignoreList":[]}