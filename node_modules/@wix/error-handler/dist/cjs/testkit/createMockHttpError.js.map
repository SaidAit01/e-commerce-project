{"version":3,"names":["_httpClient","require","_httpStatusCodes","createMockHttpError","response","overrides","_overrides$response","config","createHttpError","name","message","status","statusText","getReasonPhrase","data","headers","requestId","toJSON","__CANCEL__","createMockHttpApplicationError","applicationError","_overrides$response2","details","createMockHttpValidationError","validationError","_overrides$response3","createMockNetworkError","type","Error"],"sources":["../../../src/testkit/createMockHttpError.ts"],"sourcesContent":["import { createHttpError, HttpError } from '@wix/fe-essentials/http-client';\nimport {\n  ApplicationError,\n  ValidationError,\n} from '@wix/error-handler-core/types';\nimport { getReasonPhrase } from 'http-status-codes';\n\nexport interface HttpErrorResponse {\n  message?: string;\n  status: number;\n  requestId?: string;\n}\n\nexport function createMockHttpError(\n  response: HttpErrorResponse,\n  overrides?: Partial<ConstructorParameters<typeof HttpError>[0]>,\n) {\n  const config = {\n    ...overrides?.config,\n  };\n  return createHttpError({\n    name: 'MockHttpError',\n    message: response.message ?? 'MockHttpError',\n    response: {\n      status: response.status,\n      statusText: getReasonPhrase(response.status),\n      data: {\n        message: response.message,\n      },\n      headers: {\n        'x-wix-request-id': response.requestId,\n        ...overrides?.response?.headers,\n      },\n      config,\n      ...overrides?.response,\n    },\n    config,\n    toJSON() {\n      return this;\n    },\n    __CANCEL__: false,\n    ...overrides,\n  });\n}\n\nexport function createMockHttpApplicationError(\n  applicationError: Partial<ApplicationError>,\n  response: HttpErrorResponse,\n  overrides?: Partial<ConstructorParameters<typeof HttpError>[0]>,\n) {\n  const config = {\n    ...overrides?.config,\n  };\n  return createHttpError({\n    name: 'MockHttpApplicationError',\n    message: response.message ?? 'MockHttpApplicationError',\n    response: {\n      status: response.status,\n      statusText: getReasonPhrase(response.status),\n      data: {\n        message: response.message,\n        details: {\n          applicationError,\n        },\n      },\n      headers: {\n        'x-wix-request-id': response.requestId,\n        ...overrides?.response?.headers,\n      },\n      config,\n      ...overrides?.response,\n    },\n    config,\n    toJSON() {\n      return this;\n    },\n    __CANCEL__: false,\n    ...overrides,\n  });\n}\n\nexport function createMockHttpValidationError(\n  validationError: Partial<ValidationError>,\n  response: HttpErrorResponse,\n  overrides?: Partial<ConstructorParameters<typeof HttpError>[0]>,\n) {\n  const config = {\n    ...overrides?.config,\n  };\n  return createHttpError({\n    name: 'MockHttpValidationError',\n    message: response.message ?? 'MockHttpValidationError',\n    response: {\n      status: response.status,\n      statusText: getReasonPhrase(response.status),\n      data: {\n        message: response.message,\n        details: {\n          validationError,\n        },\n      },\n      headers: {\n        'x-wix-request-id': response.requestId,\n        ...overrides?.response?.headers,\n      },\n      config,\n      ...overrides?.response,\n    },\n    config,\n    toJSON() {\n      return this;\n    },\n    __CANCEL__: false,\n    ...overrides,\n  });\n}\n\nexport function createMockNetworkError(\n  type: 'network error' | 'timeout exceeded' | 'request aborted',\n) {\n  return new Error(type);\n}\n"],"mappings":"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","ignoreList":[]}