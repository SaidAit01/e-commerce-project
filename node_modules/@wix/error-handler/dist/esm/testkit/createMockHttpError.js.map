{"version":3,"names":["createHttpError","getReasonPhrase","createMockHttpError","response","overrides","_overrides$response","config","name","message","status","statusText","data","headers","requestId","toJSON","__CANCEL__","createMockHttpApplicationError","applicationError","_overrides$response2","details","createMockHttpValidationError","validationError","_overrides$response3","createMockNetworkError","type","Error"],"sources":["../../../src/testkit/createMockHttpError.ts"],"sourcesContent":["import { createHttpError, HttpError } from '@wix/fe-essentials/http-client';\nimport {\n  ApplicationError,\n  ValidationError,\n} from '@wix/error-handler-core/types';\nimport { getReasonPhrase } from 'http-status-codes';\n\nexport interface HttpErrorResponse {\n  message?: string;\n  status: number;\n  requestId?: string;\n}\n\nexport function createMockHttpError(\n  response: HttpErrorResponse,\n  overrides?: Partial<ConstructorParameters<typeof HttpError>[0]>,\n) {\n  const config = {\n    ...overrides?.config,\n  };\n  return createHttpError({\n    name: 'MockHttpError',\n    message: response.message ?? 'MockHttpError',\n    response: {\n      status: response.status,\n      statusText: getReasonPhrase(response.status),\n      data: {\n        message: response.message,\n      },\n      headers: {\n        'x-wix-request-id': response.requestId,\n        ...overrides?.response?.headers,\n      },\n      config,\n      ...overrides?.response,\n    },\n    config,\n    toJSON() {\n      return this;\n    },\n    __CANCEL__: false,\n    ...overrides,\n  });\n}\n\nexport function createMockHttpApplicationError(\n  applicationError: Partial<ApplicationError>,\n  response: HttpErrorResponse,\n  overrides?: Partial<ConstructorParameters<typeof HttpError>[0]>,\n) {\n  const config = {\n    ...overrides?.config,\n  };\n  return createHttpError({\n    name: 'MockHttpApplicationError',\n    message: response.message ?? 'MockHttpApplicationError',\n    response: {\n      status: response.status,\n      statusText: getReasonPhrase(response.status),\n      data: {\n        message: response.message,\n        details: {\n          applicationError,\n        },\n      },\n      headers: {\n        'x-wix-request-id': response.requestId,\n        ...overrides?.response?.headers,\n      },\n      config,\n      ...overrides?.response,\n    },\n    config,\n    toJSON() {\n      return this;\n    },\n    __CANCEL__: false,\n    ...overrides,\n  });\n}\n\nexport function createMockHttpValidationError(\n  validationError: Partial<ValidationError>,\n  response: HttpErrorResponse,\n  overrides?: Partial<ConstructorParameters<typeof HttpError>[0]>,\n) {\n  const config = {\n    ...overrides?.config,\n  };\n  return createHttpError({\n    name: 'MockHttpValidationError',\n    message: response.message ?? 'MockHttpValidationError',\n    response: {\n      status: response.status,\n      statusText: getReasonPhrase(response.status),\n      data: {\n        message: response.message,\n        details: {\n          validationError,\n        },\n      },\n      headers: {\n        'x-wix-request-id': response.requestId,\n        ...overrides?.response?.headers,\n      },\n      config,\n      ...overrides?.response,\n    },\n    config,\n    toJSON() {\n      return this;\n    },\n    __CANCEL__: false,\n    ...overrides,\n  });\n}\n\nexport function createMockNetworkError(\n  type: 'network error' | 'timeout exceeded' | 'request aborted',\n) {\n  return new Error(type);\n}\n"],"mappings":"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","ignoreList":[]}