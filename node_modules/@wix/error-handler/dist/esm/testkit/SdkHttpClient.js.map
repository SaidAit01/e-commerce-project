{"version":3,"names":["ErrorHandlerSdkHttpClient","constructor","httpClient","errorHandler","_defineProperty","input","init","response","fetchWithAuth","handleError","requestOptions","url","URL","toString","method","e"],"sources":["../../../src/testkit/SdkHttpClient.ts"],"sourcesContent":["import type { httpClient as HttpClient } from '@wix/essentials';\nimport { ErrorHandlerV2 } from '../error-handler/ErrorHandlerV2';\n\nexport class ErrorHandlerSdkHttpClient {\n  readonly httpClient;\n  readonly errorHandler;\n\n  constructor(httpClient: typeof HttpClient, errorHandler: ErrorHandlerV2) {\n    this.httpClient = httpClient;\n    this.errorHandler = errorHandler;\n  }\n\n  fetchWithAuth: typeof fetch = async (input, init) => {\n    const { httpClient, errorHandler } = this;\n    try {\n      const response = await httpClient.fetchWithAuth(input, init);\n      errorHandler.handleError(response, {\n        requestOptions: {\n          url:\n            typeof input === 'string' || input instanceof URL\n              ? input.toString()\n              : input.url,\n          method: init?.method,\n        },\n      });\n      return response;\n    } catch (e) {\n      errorHandler.handleError(e);\n      throw e;\n    }\n  };\n}\n"],"mappings":";AAGA,OAAO,MAAMA,yBAAyB,CAAC;EAIrCC,WAAWA,CAACC,WAA6B,EAAEC,aAA4B,EAAE;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA,wBAK3C,OAAOC,KAAK,EAAEC,IAAI,KAAK;MACnD,MAAM;QAAEJ,UAAU;QAAEC;MAAa,CAAC,GAAG,IAAI;MACzC,IAAI;QACF,MAAMI,QAAQ,GAAG,MAAML,UAAU,CAACM,aAAa,CAACH,KAAK,EAAEC,IAAI,CAAC;QAC5DH,YAAY,CAACM,WAAW,CAACF,QAAQ,EAAE;UACjCG,cAAc,EAAE;YACdC,GAAG,EACD,OAAON,KAAK,KAAK,QAAQ,IAAIA,KAAK,YAAYO,GAAG,GAC7CP,KAAK,CAACQ,QAAQ,CAAC,CAAC,GAChBR,KAAK,CAACM,GAAG;YACfG,MAAM,EAAER,IAAI,oBAAJA,IAAI,CAAEQ;UAChB;QACF,CAAC,CAAC;QACF,OAAOP,QAAQ;MACjB,CAAC,CAAC,OAAOQ,CAAC,EAAE;QACVZ,YAAY,CAACM,WAAW,CAACM,CAAC,CAAC;QAC3B,MAAMA,CAAC;MACT;IACF,CAAC;IAtBC,IAAI,CAACb,UAAU,GAAGA,WAAU;IAC5B,IAAI,CAACC,YAAY,GAAGA,aAAY;EAClC;AAqBF","ignoreList":[]}