{"version":3,"names":["Box","CloseButton","CopyClipboard","Popover","Text","TextButton","DuplicateSmall","InfoCircleSmall","React","memo","useEffect","useState","PopoverContent","props","requestId","errorHandler","translations","translate","t","createElement","direction","gap","dataHook","size","skin","weight","marginTop","value","_ref","isCopied","copyToClipboard","prefixIcon","onClick","RequestInfo","shown","setShown","light","secondary","showArrow","animate","placement","onMouseEnter","onMouseLeave","appendTo","Element","as","fill","Content","width","position","padding","top","right","ErrorToastContent","message","ready","setReady","_ready","getInitPromise","then"],"sources":["../../../../src/components/ErrorToastContent/ErrorToastContent.tsx"],"sourcesContent":["import {\n  Box,\n  CloseButton,\n  CopyClipboard,\n  Popover,\n  Text,\n  TextButton,\n} from '@wix/design-system';\nimport { DuplicateSmall, InfoCircleSmall } from '@wix/wix-ui-icons-common';\nimport React, { memo, useEffect, useState } from 'react';\nimport { ErrorHandler } from '../../error-handler/ErrorHandler';\n\nexport interface ErrorToastContentProps {\n  dataHook?: string;\n  errorHandler: ErrorHandler;\n  message?: string;\n  requestId?: string | null;\n}\n\nconst PopoverContent = memo(function PopoverContent(props: {\n  errorHandler: ErrorHandler;\n  requestId: string;\n}) {\n  const { requestId, errorHandler } = props;\n\n  const {\n    translations: { translate: t },\n  } = errorHandler;\n\n  return (\n    <Box direction=\"vertical\" gap=\"SP2\">\n      <div>\n        <Text\n          dataHook=\"info-description\"\n          size=\"small\"\n          skin=\"standard\"\n          weight=\"thin\"\n        >\n          {t('errorHandler.requestID.tooltip.description')}\n        </Text>\n      </div>\n      <Box marginTop={2}>\n        <CopyClipboard value={requestId}>\n          {({ isCopied, copyToClipboard }) => (\n            <TextButton\n              prefixIcon={<DuplicateSmall />}\n              size=\"small\"\n              onClick={() => {\n                copyToClipboard();\n              }}\n            >\n              {isCopied\n                ? t('errorHandler.requestID.tooltip.cta.copied-success')\n                : t('errorHandler.requestID.tooltip.cta')}\n            </TextButton>\n          )}\n        </CopyClipboard>\n      </Box>\n    </Box>\n  );\n});\n\nconst RequestInfo = memo(function RequestInfo(props: {\n  errorHandler: ErrorHandler;\n  requestId: string;\n  shown: boolean;\n  setShown: (shown: boolean) => void;\n}) {\n  const { errorHandler, requestId, shown, setShown } = props;\n\n  return (\n    <Box gap={1} dataHook=\"request-info\">\n      <Text\n        dataHook=\"info-request-id\"\n        size=\"small\"\n        weight=\"thin\"\n        light\n        secondary\n      >\n        {`Request ID: ${requestId}`}\n      </Text>\n      <Popover\n        showArrow\n        animate\n        placement=\"auto\"\n        shown={shown}\n        onMouseEnter={() => setShown(true)}\n        onMouseLeave={() => setShown(false)}\n        appendTo=\"parent\"\n        dataHook=\"info-popover\"\n      >\n        <Popover.Element>\n          <TextButton onClick={() => setShown(true)} as=\"button\">\n            <InfoCircleSmall fill=\"var(--wsr-color-D40, #868aa5)\" />\n          </TextButton>\n        </Popover.Element>\n        <Popover.Content>\n          <Box width=\"350px\" position=\"relative\" padding=\"SP5\">\n            <Box position=\"absolute\" top=\"6px\" right=\"12px\">\n              <CloseButton\n                size=\"medium\"\n                onClick={() => setShown(false)}\n                skin=\"dark\"\n              />\n            </Box>\n\n            <PopoverContent errorHandler={errorHandler} requestId={requestId} />\n          </Box>\n        </Popover.Content>\n      </Popover>\n    </Box>\n  );\n});\n\nexport function ErrorToastContent(props: ErrorToastContentProps) {\n  const { dataHook, message, requestId, errorHandler } = props;\n\n  const { translations } = errorHandler;\n\n  const [shown, setShown] = useState(false);\n\n  const [ready, setReady] = useState(translations._ready);\n\n  useEffect(() => {\n    if (ready) {\n      return;\n    }\n    translations.getInitPromise().then(() => {\n      setReady(true);\n    });\n  }, []);\n\n  return (\n    <Box dataHook={dataHook} direction=\"vertical\">\n      {message}\n\n      {requestId && ready && (\n        <RequestInfo\n          errorHandler={errorHandler}\n          requestId={requestId}\n          shown={shown}\n          setShown={setShown}\n        />\n      )}\n    </Box>\n  );\n}\n"],"mappings":"AAAA,SACEA,GAAG,EACHC,WAAW,EACXC,aAAa,EACbC,OAAO,EACPC,IAAI,EACJC,UAAU,QACL,oBAAoB;AAC3B,SAASC,cAAc,EAAEC,eAAe,QAAQ,0BAA0B;AAC1E,OAAOC,KAAK,IAAIC,IAAI,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAUxD,MAAMC,cAAc,gBAAGH,IAAI,CAAC,SAASG,cAAcA,CAACC,KAGnD,EAAE;EACD,MAAM;IAAEC,SAAS;IAAEC;EAAa,CAAC,GAAGF,KAAK;EAEzC,MAAM;IACJG,YAAY,EAAE;MAAEC,SAAS,EAAEC;IAAE;EAC/B,CAAC,GAAGH,YAAY;EAEhB,oBACEP,KAAA,CAAAW,aAAA,CAACnB,GAAG;IAACoB,SAAS,EAAC,UAAU;IAACC,GAAG,EAAC;EAAK,gBACjCb,KAAA,CAAAW,aAAA,2BACEX,KAAA,CAAAW,aAAA,CAACf,IAAI;IACHkB,QAAQ,EAAC,kBAAkB;IAC3BC,IAAI,EAAC,OAAO;IACZC,IAAI,EAAC,UAAU;IACfC,MAAM,EAAC;EAAM,GAEZP,CAAC,CAAC,4CAA4C,CAC3C,CACH,CAAC,eACNV,KAAA,CAAAW,aAAA,CAACnB,GAAG;IAAC0B,SAAS,EAAE;EAAE,gBAChBlB,KAAA,CAAAW,aAAA,CAACjB,aAAa;IAACyB,KAAK,EAAEb;EAAU,GAC7Bc,IAAA;IAAA,IAAC;MAAEC,QAAQ;MAAEC;IAAgB,CAAC,GAAAF,IAAA;IAAA,oBAC7BpB,KAAA,CAAAW,aAAA,CAACd,UAAU;MACT0B,UAAU,eAAEvB,KAAA,CAAAW,aAAA,CAACb,cAAc,MAAE,CAAE;MAC/BiB,IAAI,EAAC,OAAO;MACZS,OAAO,EAAEA,CAAA,KAAM;QACbF,eAAe,CAAC,CAAC;MACnB;IAAE,GAEDD,QAAQ,GACLX,CAAC,CAAC,mDAAmD,CAAC,GACtDA,CAAC,CAAC,oCAAoC,CAChC,CAAC;EAAA,CAEF,CACZ,CACF,CAAC;AAEV,CAAC,CAAC;AAEF,MAAMe,WAAW,gBAAGxB,IAAI,CAAC,SAASwB,WAAWA,CAACpB,KAK7C,EAAE;EACD,MAAM;IAAEE,YAAY;IAAED,SAAS;IAAEoB,KAAK;IAAEC;EAAS,CAAC,GAAGtB,KAAK;EAE1D,oBACEL,KAAA,CAAAW,aAAA,CAACnB,GAAG;IAACqB,GAAG,EAAE,CAAE;IAACC,QAAQ,EAAC;EAAc,gBAClCd,KAAA,CAAAW,aAAA,CAACf,IAAI;IACHkB,QAAQ,EAAC,iBAAiB;IAC1BC,IAAI,EAAC,OAAO;IACZE,MAAM,EAAC,MAAM;IACbW,KAAK;IACLC,SAAS;EAAA,GAER,eAAevB,SAAS,EACrB,CAAC,eACPN,KAAA,CAAAW,aAAA,CAAChB,OAAO;IACNmC,SAAS;IACTC,OAAO;IACPC,SAAS,EAAC,MAAM;IAChBN,KAAK,EAAEA,KAAM;IACbO,YAAY,EAAEA,CAAA,KAAMN,QAAQ,CAAC,IAAI,CAAE;IACnCO,YAAY,EAAEA,CAAA,KAAMP,QAAQ,CAAC,KAAK,CAAE;IACpCQ,QAAQ,EAAC,QAAQ;IACjBrB,QAAQ,EAAC;EAAc,gBAEvBd,KAAA,CAAAW,aAAA,CAAChB,OAAO,CAACyC,OAAO,qBACdpC,KAAA,CAAAW,aAAA,CAACd,UAAU;IAAC2B,OAAO,EAAEA,CAAA,KAAMG,QAAQ,CAAC,IAAI,CAAE;IAACU,EAAE,EAAC;EAAQ,gBACpDrC,KAAA,CAAAW,aAAA,CAACZ,eAAe;IAACuC,IAAI,EAAC;EAA+B,CAAE,CAC7C,CACG,CAAC,eAClBtC,KAAA,CAAAW,aAAA,CAAChB,OAAO,CAAC4C,OAAO,qBACdvC,KAAA,CAAAW,aAAA,CAACnB,GAAG;IAACgD,KAAK,EAAC,OAAO;IAACC,QAAQ,EAAC,UAAU;IAACC,OAAO,EAAC;EAAK,gBAClD1C,KAAA,CAAAW,aAAA,CAACnB,GAAG;IAACiD,QAAQ,EAAC,UAAU;IAACE,GAAG,EAAC,KAAK;IAACC,KAAK,EAAC;EAAM,gBAC7C5C,KAAA,CAAAW,aAAA,CAAClB,WAAW;IACVsB,IAAI,EAAC,QAAQ;IACbS,OAAO,EAAEA,CAAA,KAAMG,QAAQ,CAAC,KAAK,CAAE;IAC/BX,IAAI,EAAC;EAAM,CACZ,CACE,CAAC,eAENhB,KAAA,CAAAW,aAAA,CAACP,cAAc;IAACG,YAAY,EAAEA,YAAa;IAACD,SAAS,EAAEA;EAAU,CAAE,CAChE,CACU,CACV,CACN,CAAC;AAEV,CAAC,CAAC;AAEF,OAAO,SAASuC,iBAAiBA,CAACxC,KAA6B,EAAE;EAC/D,MAAM;IAAES,QAAQ;IAAEgC,OAAO;IAAExC,SAAS;IAAEC;EAAa,CAAC,GAAGF,KAAK;EAE5D,MAAM;IAAEG;EAAa,CAAC,GAAGD,YAAY;EAErC,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAEzC,MAAM,CAAC4C,KAAK,EAAEC,QAAQ,CAAC,GAAG7C,QAAQ,CAACK,YAAY,CAACyC,MAAM,CAAC;EAEvD/C,SAAS,CAAC,MAAM;IACd,IAAI6C,KAAK,EAAE;MACT;IACF;IACAvC,YAAY,CAAC0C,cAAc,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;MACvCH,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEhD,KAAA,CAAAW,aAAA,CAACnB,GAAG;IAACsB,QAAQ,EAAEA,QAAS;IAACF,SAAS,EAAC;EAAU,GAC1CkC,OAAO,EAEPxC,SAAS,IAAIyC,KAAK,iBACjB/C,KAAA,CAAAW,aAAA,CAACc,WAAW;IACVlB,YAAY,EAAEA,YAAa;IAC3BD,SAAS,EAAEA,SAAU;IACrBoB,KAAK,EAAEA,KAAM;IACbC,QAAQ,EAAEA;EAAS,CACpB,CAEA,CAAC;AAEV","ignoreList":[]}