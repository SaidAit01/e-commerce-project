{"version":3,"names":["getErrorCodesMap","CommonErrorsMapState","constructor","params","_defineProperty","translations","errorMonitor","webWindow","_initPromise","_init","getInitPromise","error","setCommonErrors","e"],"sources":["../../../src/state/CommonErrorsMapState.ts"],"sourcesContent":["import { TranslationsState } from './TranslationsState';\nimport {\n  ErrorCodesMap,\n  ShowErrorProps,\n  ErrorMonitor,\n} from '@wix/error-handler-core/types';\nimport { ErrorAccessor } from './ErrorAccessor';\nimport { getErrorCodesMap } from './getErrorCodesMap';\n\nexport interface CommonErrorsMapStateParams {\n  translations: TranslationsState;\n  errorMonitor: ErrorMonitor;\n  webWindow?: Partial<typeof window>;\n  getErrorCodesMap?: () => Promise<typeof import('./commonErrorsMapping')>;\n}\n\nexport class CommonErrorsMapState {\n  readonly translations;\n  readonly errorMonitor;\n  readonly webWindow;\n  readonly getErrorCodesMap;\n\n  private readonly _initPromise;\n\n  commonErrors?: {\n    commonErrorsMap: ErrorCodesMap;\n    connectionErrorShowErrorProps: ShowErrorProps;\n    defaultErrorShowErrorProps: ShowErrorProps;\n    getNetworkErrorShowErrorProps: (\n      errorAccessor: ErrorAccessor,\n    ) => ShowErrorProps;\n  };\n\n  constructor(params: CommonErrorsMapStateParams) {\n    this.translations = params.translations;\n    this.errorMonitor = params.errorMonitor;\n    this.webWindow = params.webWindow;\n    this.getErrorCodesMap = params.getErrorCodesMap ?? getErrorCodesMap;\n    this._initPromise = this._init();\n  }\n\n  async getInitPromise() {\n    const error = await this._initPromise;\n    if (error) {\n      throw error;\n    }\n  }\n\n  private async _init() {\n    try {\n      const { setCommonErrors } = await this.getErrorCodesMap();\n      await setCommonErrors(this);\n      return null;\n    } catch (e) {\n      return e as Error;\n    }\n  }\n}\n"],"mappings":";AAOA,SAASA,gBAAgB,QAAQ,oBAAoB;AASrD,OAAO,MAAMC,oBAAoB,CAAC;EAiBhCC,WAAWA,CAACC,MAAkC,EAAE;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAC9C,IAAI,CAACC,YAAY,GAAGF,MAAM,CAACE,YAAY;IACvC,IAAI,CAACC,YAAY,GAAGH,MAAM,CAACG,YAAY;IACvC,IAAI,CAACC,SAAS,GAAGJ,MAAM,CAACI,SAAS;IACjC,IAAI,CAACP,gBAAgB,GAAGG,MAAM,CAACH,gBAAgB,IAAIA,gBAAgB;IACnE,IAAI,CAACQ,YAAY,GAAG,IAAI,CAACC,KAAK,CAAC,CAAC;EAClC;EAEA,MAAMC,cAAcA,CAAA,EAAG;IACrB,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACH,YAAY;IACrC,IAAIG,KAAK,EAAE;MACT,MAAMA,KAAK;IACb;EACF;EAEA,MAAcF,KAAKA,CAAA,EAAG;IACpB,IAAI;MACF,MAAM;QAAEG;MAAgB,CAAC,GAAG,MAAM,IAAI,CAACZ,gBAAgB,CAAC,CAAC;MACzD,MAAMY,eAAe,CAAC,IAAI,CAAC;MAC3B,OAAO,IAAI;IACb,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,OAAOA,CAAC;IACV;EACF;AACF","ignoreList":[]}