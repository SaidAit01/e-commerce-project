{"version":3,"names":["_registry","_interopRequireDefault","require","getDevicePixelRatio","isMSMobileDevice","test","navigator","userAgent","Math","round","window","screen","availWidth","width","document","documentElement","clientWidth","devicePixelRatio","STATIC_MEDIA_URL","MEDIA_ROOT_URL","initCustomElement","services","contextWindow","envConsts","env","staticMediaUrl","mediaRootUrl","experiments","define","init"],"sources":["../../src/customElementInit.ts"],"sourcesContent":["import init from './custom-element/registry';\nimport { WixImageExternalServices, EnvConsts } from './types';\n\nconst getDevicePixelRatio = () => {\n  const isMSMobileDevice = /iemobile/i.test(navigator.userAgent);\n\n  if (isMSMobileDevice) {\n    return Math.round(\n      window.screen.availWidth /\n        (window.screen.width || window.document.documentElement.clientWidth),\n    );\n  }\n\n  return window.devicePixelRatio;\n};\n\nconst STATIC_MEDIA_URL = 'https://static.wixstatic.com/media';\nconst MEDIA_ROOT_URL = 'https://static.wixstatic.com';\n\nfunction initCustomElement(\n  services: WixImageExternalServices = {},\n  contextWindow: (Window & typeof globalThis) | null = null,\n  envConsts: Partial<EnvConsts> = {} as Partial<EnvConsts>,\n) {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  const env = {\n    staticMediaUrl: STATIC_MEDIA_URL,\n    mediaRootUrl: MEDIA_ROOT_URL,\n    experiments: {},\n    devicePixelRatio: getDevicePixelRatio(),\n    ...envConsts,\n  } as EnvConsts;\n\n  const define = init(contextWindow, services);\n\n  if (define) {\n    define(env);\n  }\n}\n\nexport { initCustomElement };\n"],"mappings":";;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAGA,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EAChC,MAAMC,gBAAgB,GAAG,WAAW,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC;EAE9D,IAAIH,gBAAgB,EAAE;IACpB,OAAOI,IAAI,CAACC,KAAK,CACfC,MAAM,CAACC,MAAM,CAACC,UAAU,IACrBF,MAAM,CAACC,MAAM,CAACE,KAAK,IAAIH,MAAM,CAACI,QAAQ,CAACC,eAAe,CAACC,WAAW,CACvE,CAAC;EACH;EAEA,OAAON,MAAM,CAACO,gBAAgB;AAChC,CAAC;AAED,MAAMC,gBAAgB,GAAG,oCAAoC;AAC7D,MAAMC,cAAc,GAAG,8BAA8B;AAErD,SAASC,iBAAiBA,CACxBC,QAAkC,GAAG,CAAC,CAAC,EACvCC,aAAkD,GAAG,IAAI,EACzDC,SAA6B,GAAG,CAAC,CAAuB,EACxD;EACA,IAAI,OAAOb,MAAM,KAAK,WAAW,EAAE;IACjC;EACF;EAEA,MAAMc,GAAG,GAAG;IACVC,cAAc,EAAEP,gBAAgB;IAChCQ,YAAY,EAAEP,cAAc;IAC5BQ,WAAW,EAAE,CAAC,CAAC;IACfV,gBAAgB,EAAEd,mBAAmB,CAAC,CAAC;IACvC,GAAGoB;EACL,CAAc;EAEd,MAAMK,MAAM,GAAG,IAAAC,iBAAI,EAACP,aAAa,EAAED,QAAQ,CAAC;EAE5C,IAAIO,MAAM,EAAE;IACVA,MAAM,CAACJ,GAAG,CAAC;EACb;AACF","ignoreList":[]}