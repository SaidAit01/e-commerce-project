{"version":3,"names":["_react","_interopRequireDefault","require","_utils","_args","_index","_jsxFileName","openExperiments","urlParams","URLSearchParams","window","location","search","experimentsParam","get","split","forEach","experiment","push","_default","exports","default","title","component","Component","argTypes","argTypesNG","ImageNG","args","id","alt","priority","decorative","role","image","breakpoints","crop","objectFit","focalPoint","quality","resolutions","sources","toSorted","a","b","concat","map","bp","index","cropIndex","Math","min","length","CONTENT_OPTIONS","media","maxWidth","sizes","size","value","type","targetSizes","props","createElement","style","margin","width","height","background","__self","__source","fileName","lineNumber","columnNumber","reverse","objectFitIndex","focalPointIndex","getMediaSizeQueryString","x","y","join","_extends2"],"sources":["../../src/ImageNG.stories.tsx"],"sourcesContent":["import React from 'react';\nimport { Meta } from '@wix/yoshi-storybook-dependencies';\nimport { getMediaSizeQueryString } from './custom-element/utils';\nimport { CONTENT_OPTIONS, argTypesNG } from './storybook/args';\nimport { ImageNG as Component } from './index';\nimport { ImageNGProps, ImageSource } from './types';\n\n// add here default open experiments\nconst openExperiments: string[] = [];\n\nconst urlParams = new URLSearchParams(window.location.search);\nconst experimentsParam = urlParams.get('experiments');\n(experimentsParam?.split(',') || []).forEach((experiment) => {\n  openExperiments.push(experiment);\n});\n\nexport default {\n  title: 'Image',\n  component: Component,\n  argTypes: argTypesNG,\n} as Meta;\n\nexport const ImageNG: React.VFC = (args: any) => {\n  const {\n    id,\n    alt,\n    priority,\n    decorative,\n    role,\n    image,\n    breakpoints,\n    crop,\n    objectFit,\n    focalPoint,\n    quality,\n    resolutions,\n  } = args;\n  const sources: ImageSource[] = breakpoints\n    .toSorted((a: number, b: number) => a - b)\n    .concat('default')\n    .map((bp: number | 'default', index: number) => {\n      const cropIndex =\n        bp === 'default' ? 0 : Math.min(index + 1, crop.length - 1);\n      return {\n        image: {\n          ...(CONTENT_OPTIONS[image] || {}),\n          ...(crop.length && { crop: crop[cropIndex] }),\n          quality,\n          // TODO(ameerabuf) - unsharpMask?\n        },\n        ...(bp !== 'default' ? { media: { maxWidth: bp } } : {}),\n        sizes: [{ size: { value: 60, type: 'vw' } }],\n        targetSizes: resolutions,\n      };\n    });\n  const props: ImageNGProps = {\n    id,\n    alt,\n    priority,\n    decorative,\n    role,\n    sources,\n  };\n\n  return (\n    // TODO(ameerabuf) - allow layout change in storybook? it can demonstrate 'sizes' attribute behavior\n    <div\n      style={{\n        margin: 'auto',\n        width: '60vw',\n        height: '500px',\n        background: '#ff0000aa',\n      }}\n    >\n      <style>\n        {[...sources]\n          .reverse()\n          .map(({ media }: ImageSource, index: number) => {\n            const objectFitIndex = Math.min(index, objectFit.length - 1);\n            const focalPointIndex = Math.min(index, focalPoint.length - 1);\n            return `${\n              media ? `@media ${getMediaSizeQueryString(media)} {` : ''\n            }#${id}{--object-fit: ${\n              objectFit[objectFitIndex] || 'cover'\n            }; --focal-x: ${focalPoint[focalPointIndex].x ?? 50};  --focal-y: ${\n              focalPoint[focalPointIndex].y ?? 50\n            };}${media ? '}' : ''}`;\n          })\n          .join(' ')}\n      </style>\n      <Component {...props} />\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}